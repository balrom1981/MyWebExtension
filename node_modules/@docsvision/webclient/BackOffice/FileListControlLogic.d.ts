/// <reference types="webclient-globals" />
/// <reference types="jquery" />
import { FileListAttachedElements } from "@docsvision/webclient/BackOffice/FileListAttachElements";
import { FileListItem } from "@docsvision/webclient/BackOffice/FileListItem";
import { FileListControlParams } from "@docsvision/webclient/BackOffice/FileListControl";
import { FileListControlImpl, FileListImplState } from "@docsvision/webclient/BackOffice/FileListControlImpl";
import { GenModels } from "@docsvision/webclient/Generated/DocsVision.WebClient.Models";
/** @internal */
export declare class FileListControlLogic {
    private readonly forceUpdate?;
    mainAttach: FileListAttachedElements;
    extraAttach: FileListAttachedElements;
    initialized: boolean;
    lastSaveDeferred: DVPromise<any>;
    parent: FileListControlImpl;
    filesToRemove: FileListItem[];
    openedInEditorFiles: string[];
    static readonly illegalFileNameCharacters: RegExp;
    static readonly terminalServiceUrl: string;
    constructor(forceUpdate?: () => void);
    init(_mainAttach: FileListAttachedElements, _extraAttach: FileListAttachedElements, _parent: FileListControlImpl): void;
    loadFilesFromModel(model: GenModels.FileListDataModel, oldFiles?: FileListItem[]): FileListItem[];
    loadFileModel(model: GenModels.FileListDataModel, appendFiles?: boolean): void;
    getFilePreviewUrl(fileItem: FileListItem, action: string, version?: GenModels.VersionedFileModel, pageIndex?: number): string;
    onSaved(): Promise<JQueryDeferred<any>>;
    uploadNewFiles(): Promise<any>;
    sendRequest(sendFunc: () => Promise<GenModels.FileListDataModel>, savingItems: FileListItem[]): Promise<any>;
    getFiles(mainFiles: boolean): FileListItem[];
    initJQueryUploaderForAddFiles(attach: FileListAttachedElements, main: boolean): void;
    initJQueryUploaderForAddFileVersions(attach: FileListAttachedElements, fileItem: FileListItem, canRename: (fileItem: FileListItem) => boolean): void;
    initJQueryUploaderForSignedFile(attach: FileListAttachedElements, fileItem: FileListItem, canRename: (fileItem: FileListItem) => boolean): void;
    generateLinkTag: (url: string) => void;
    download(fileItem: FileListItem, fileVersion: GenModels.VersionedFileModel, action: string): void;
    getDownloadUrl(fileItem: FileListItem, fileVersion: GenModels.VersionedFileModel, action: string): string;
    webDav(fileItem: FileListItem, canEdit: boolean): Promise<void>;
    private replaceTimestampInWebDavLink;
    viewFileWithSignature(fileItem: FileListItem, action: string): void;
    /**
     * Mark file for remove, or send remove request imediately
     * @param fileItem File to remove
     * @param immediately Send request to the server right now, or wait onSaved
     */
    removeFile(fileItem: FileListItem, immediately: boolean): Promise<any>;
    protected removeFileFromServer(fileItem: FileListItem): Promise<any>;
    changeFileTypeOnServer(fileItem: FileListItem): Promise<any>;
    showPreviewIfSupported(fileItem: FileListItem, version?: GenModels.VersionedFileModel): void;
    lockFile(fileItem: FileListItem): Promise<any>;
    unlockFile(fileItem: FileListItem): Promise<any>;
    getVisibilityOpenFileButton(fileId: string): boolean;
    openFile(fileItem: FileListItem, canEdit: boolean): Promise<void>;
    private getOpenFileRequestData;
    private sendOpenFileDvWebTool;
    private sendOpenFileRequest;
    showCommentsDialog(fileItem: FileListItem, versionId: string, enableAddComments: boolean): () => void;
    showRenameFileDialog(fileItem: FileListItem): () => void;
    loadFilesPart(skipCount: number): Promise<void>;
    reloadFiles(): Promise<void>;
    private sortFiles;
    protected updateVersionsOnLoad(appendFiles?: boolean): void;
    closeAllMenusBut(fileItem: FileListItem): void;
    fileMenuOpening(fileItem: FileListItem, data: any): Promise<void>;
    fileVersionExpanding(fileItem: FileListItem): Promise<void>;
    rowClick(fileItem: FileListItem): void;
    nameClick(fileItem: FileListItem): Promise<void>;
    removeFileItem(index: number): void;
    protected get state(): FileListImplState;
    protected get props(): FileListControlParams;
    protected initJQueryUploader(attach: FileListAttachedElements, options: any): void;
    protected onFilesAdded(main: boolean, attach: FileListAttachedElements, e: any, data: any): Promise<void>;
    private getIncorrectNamed;
    protected onFileSignAdded(fileItem: FileListItem, attach: FileListAttachedElements, data: any, canRename?: boolean): Promise<void>;
    protected onFileVersionAdded(fileItem: FileListItem, attach: FileListAttachedElements, data: any, canRename?: boolean): void;
    protected sendFiles(attach: FileListAttachedElements, items: FileListItem[], areVersions?: boolean, isSignature?: boolean): Promise<any>;
    checkSignatureFiles(files: File[] | string[]): Promise<void>;
    protected processResponse(responseData: GenModels.FileListDataModel, deferred: DVPromise<any>, uploadingItems: FileListItem[], areVersions?: boolean, isSignature?: boolean): void;
    protected getItemsToUpload(): FileListItem[];
    isSignatureFile(fileName: string): boolean;
}
